{
  "config": {
    "resolution": [ 1280, 720 ],
    "input_layout": "Shaders\\DirectLightVS.hlsl"
  },

  "resource": {
    "vertex_shader": {
      "direct_light": "Shaders\\DirectLightVS.hlsl",
      "pre_z": "Shaders\\PreZ\\VertexShader.hlsl",
      "voxelization": "Shaders\\VoxelizationVS.hlsl"
    },
    "geometry_shader": {
      "voxelization": "Shaders\\VoxelizationGS.hlsl"
    },
    "pixel_shader": {
      "direct_light": "Shaders\\DirectLightPS.hlsl",
      "depth_visualization": "Shaders\\DepthPS.hlsl",
      "pre_z": "Shaders\\PreZ\\PixelShader.hlsl",
      "voxelization": "Shaders\\VoxelizationPS.hlsl",
      "cone_tracing": "Shaders\\ConeTracingPS.hlsl"
    },
    "rasterizer_state": {
      "default": "States\\RS_Default.json",
      "no_cull": "States\\RS_No_Cull.json"
    },
    "depth_stencil_state": {
      "default": "States\\DSS_Default.json",
      "read": "States\\DSS_Read.json",
      "disable": "States\\DSS_Disable.json"
    },
    "blend_state": {
      "disable": "States\\BS_Disable.json"
    },
    "sampler_state": {
      "default": "States\\SS_Default.json",
      "clamp": "States\\SS_Clamp.json"
    },
    "view_port": {
      "default": "States\\VP_Default.json",
      "voxelization": "States\\VP_64.json",
      "shadow_map": "States\\VP_SM.json"
    },
    "resource": {
      "depth_stencil": "Resources\\DepthStencil.json",
      "voxel_texture": "Resources\\voxel.json",
      "shadow_map": "Resources\\ShadowMap.json"
    }
  },

  "pass": {
    //-------------------------------------------------Depth Visualization---------------------------------------------
    "depth": {
      "name": "depth_visualization",
      "vertex_shader": "direct_light",
      "pixel_shader": "depth_visualization",
      "rasterizer_state": "default",
      "depth_stencil_state": "default",
      "blend_state": "disable",
      "view_port": "shadow_map",
      "topology": "trianglelist",
      "sampler_state": [
        {
          "name": "default",
          "stage": "pixel_shader",
          "slot": 0
        }
      ],
      "resource": [
        {
          "name": "shadow_map",
          "binding_flag": "render_target",
          "stage": "output_merge",
          "slot": 0
        },
        {
          "name": "depth_stencil",
          "binding_flag": "depth_stencil",
          "stage": "output_merge",
          "slot": 0
        }
      ],
      "operation": [
        {
          "type": "reset",
          "target": "depth_stencil",
          "value": [ 1.0 ],
          "value_type": "depth"
        },
        {
          "type": "reset",
          "target": "shadow_map",
          "value": [ 0, 0, 0, 0 ],
          "value_type": "float"
        },
        { "type": "draw" }
      ]
    },




    //-------------------------------------------------Pre Z---------------------------------------------
    "pre_z": {
      "name": "pre_z",
      "vertex_shader": "direct_light",
      "pixel_shader": "depth_visualization",
      "rasterizer_state": "default",
      "depth_stencil_state": "default",
      "blend_state": "disable",
      "view_port": "default",
      "topology": "trianglelist",
      "sampler_state": [
        {
          "name": "default",
          "stage": "pixel_shader",
          "slot": 0
        }
      ],
      "resource": [
        {
          "name": "depth_stencil",
          "binding_flag": "depth_stencil",
          "stage": "output_merge",
          "slot": 0
        }
      ],
      "operation": [
        {
          "type": "reset",
          "target": "depth_stencil",
          "value": [ 1.0 ],
          "value_type": "depth"
        },
        { "type": "draw" }
      ]
    },

    //-------------------------------------------------Direct Light---------------------------------------------
    "direct_light": {
      "name": "direct_light",
      "vertex_shader": "direct_light",
      "pixel_shader": "direct_light",
      "rasterizer_state": "default",
      "depth_stencil_state": "read",
      "blend_state": "disable",
      "view_port": "default",
      "topology": "trianglelist",
      "sampler_state": [
        {
          "name": "default",
          "stage": "pixel_shader",
          "slot": 0
        },
        {
          "name": "clamp",
          "stage": "pixel_shader",
          "slot": 1
        }
      ],
      "resource": [
        {
          "name": "shadow_map",
          "binding_flag": "shader_resource",
          "stage": "pixel_shader",
          "slot": 10
        },
        {
          "name": "back_buffer",
          "binding_flag": "render_target",
          "stage": "output_merge",
          "slot": 0
        },
        {
          "name": "depth_stencil",
          "binding_flag": "depth_stencil",
          "stage": "output_merge",
          "slot": 0
        }
      ],
      "operation": [

        {
          "type": "reset",
          "target": "back_buffer",
          "value": [ 0, 0, 0.5, 0 ],
          "value_type": "float"
        },
        { "type": "draw" }
      ]
    },

    //-------------------------------------------------Voxelization---------------------------------------------
    "voxelization": {
      "name": "voxelization",
      "vertex_shader": "voxelization",
      "geometry_shader": "voxelization",
      "pixel_shader": "voxelization",
      "rasterizer_state": "no_cull",
      "depth_stencil_state": "disable",
      "blend_state": "disable",
      "view_port": "voxelization",
      "topology": "trianglelist",
      "sampler_state": [
        {
          "name": "default",
          "stage": "pixel_shader",
          "slot": 0
        },
        {
          "name": "clamp",
          "stage": "pixel_shader",
          "slot": 1
        }
      ],
      "resource": [
        {
          "name": "shadow_map",
          "binding_flag": "shader_resource",
          "stage": "pixel_shader",
          "slot": 10
        },
        {
          "name": "back_buffer",
          "binding_flag": "render_target",
          "stage": "output_merge",
          "slot": 0
        },
        {
          "name": "depth_stencil",
          "binding_flag": "depth_stencil",
          "stage": "output_merge",
          "slot": 0
        },
        {
          "name": "voxel_texture",
          "binding_flag": "unordered_access",
          "stage": "output_merge",
          "slot": 4
        }
      ],
      "operation": [
        {
          "type": "reset",
          "target": "voxel_texture",
          "value": [ 0, 0, 0, 0 ],
          "value_type": "float"
        },
        { "type": "draw" }
      ]
    },

    //-------------------------------------------------Cone Tracing---------------------------------------------
    "cone_tracing": {
      "name": "cone_tracing",
      "vertex_shader": "direct_light",
      "pixel_shader": "cone_tracing",
      "rasterizer_state": "default",
      "depth_stencil_state": "read",
      "blend_state": "disable",
      "view_port": "default",
      "topology": "trianglelist",
      "sampler_state": [
        {
          "name": "default",
          "stage": "pixel_shader",
          "slot": 0
        },
        {
          "name": "clamp",
          "stage": "pixel_shader",
          "slot": 1
        }
      ],
      "resource": [
        {
          "name": "shadow_map",
          "binding_flag": "shader_resource",
          "stage": "pixel_shader",
          "slot": 10
        },
        {
          "name": "back_buffer",
          "binding_flag": "render_target",
          "stage": "output_merge",
          "slot": 0
        },
        {
          "name": "depth_stencil",
          "binding_flag": "depth_stencil",
          "stage": "output_merge",
          "slot": 0
        },
        {
          "name": "voxel_texture",
          "binding_flag": "shader_resource",
          "stage": "pixel_shader",
          "slot": 8
        }
      ],
      "operation": [
        {
          "type": "reset",
          "target": "back_buffer",
          "value": [ 0, 0, 0.5, 0 ],
          "value_type": "float"
        },
        { "type": "draw" },
        {
          "type": "generate_mip",
          "target": "voxel_texture"
        }
      ]
    }
  },

  //----------------------------------------Renderer---------------------------------------
  "renderer": {
    "direct_light": [
      "pre_z",
      "direct_light"
    ],
    "voxel_cone_tracing": [
      "voxelization",
      "pre_z",
      "cone_tracing"
    ],
    "depth": [
      "depth"
    ]
  }
}